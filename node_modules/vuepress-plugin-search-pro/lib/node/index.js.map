{"version":3,"file":"index.js","sources":["../../src/node/compact.ts","../../src/node/excerpt.ts","../../src/node/generateIndex.ts","../../src/node/utils.ts","../../src/node/generateWorker.ts","../../src/node/locales.ts","../../src/node/prepare/searchIndex.ts","../../src/node/prepare/store.ts","../../src/node/plugin.ts","../../src/shared/data.ts"],"sourcesContent":["import { createConverter } from \"vuepress-shared/node\";\n\nimport type { SearchProOptions } from \"./options.js\";\n\n/** @deprecated */\nexport const convertOptions = (\n  options: SearchProOptions & Record<string, unknown>,\n): void => {\n  const { deprecatedLogger } = createConverter(\"search-pro\");\n\n  deprecatedLogger({\n    options,\n    old: \"fullIndex\",\n    new: \"indexContent\",\n  });\n  deprecatedLogger({\n    options,\n    old: \"historyCount\",\n    new: \"resultHistoryCount\",\n  });\n  deprecatedLogger({\n    options,\n    old: \"delay\",\n    new: \"searchDelay\",\n  });\n};\n","import { getPageExcerpt } from \"@vuepress/helper\";\nimport type { App, Page } from \"vuepress/core\";\n\nexport const setPageExcerpt = (app: App): void => {\n  const { pages, pluginApi } = app;\n  const isBlogPluginEnabled = pluginApi.plugins.some(\n    ({ name }) => name === \"@vuepress/plugin-blog\",\n  );\n  const hasExcerpt =\n    isBlogPluginEnabled || pages.some((page) => \"excerpt\" in page.data);\n\n  if (!hasExcerpt)\n    pages.forEach((page: Page<{ excerpt?: string }>) => {\n      page.data[\"excerpt\"] = getPageExcerpt(app, page, {\n        length: 300,\n      });\n    });\n};\n","import { entries, fromEntries, isArray, keys } from \"@vuepress/helper\";\nimport type { AnyNode, Element } from \"cheerio\";\nimport { load } from \"cheerio\";\nimport { addAllAsync, createIndex } from \"slimsearch\";\nimport type { App, Page } from \"vuepress/core\";\n\nimport type {\n  SearchProCustomFieldOptions,\n  SearchProOptions,\n} from \"./options.js\";\nimport type { Store } from \"./utils.js\";\nimport type {\n  IndexItem,\n  LocaleIndex,\n  PageIndexId,\n  PageIndexItem,\n  SearchIndexStore,\n  SectionIndexItem,\n} from \"../shared/index.js\";\n\n/**\n * These tags are valid HTML tags which can contain content.\n */\n\n/**\n * @description h1 is removed because it's the title of the page.\n */\nconst HEADING_TAGS = \"h2,h3,h4,h5,h6\".split(\",\");\n\n/**\n * @description Not all the block tags are included, because some of them shall not be indexed\n */\nconst CONTENT_BLOCK_TAGS =\n  \"header,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,li,main,ol,p,ul,caption,table,thead,tbody,tfoot,th,tr,td,datalist,fieldset,form,legend,optgroup,option,select,details,dialog,menu,menuitem,summary,blockquote,pre\".split(\n    \",\",\n  );\n\n/**\n * @description Not all the inline tags are included, because some of them shall not be indexed, e.g.: pre\n *\n * routerlink is added to the list, because it is a special link tag\n */\nconst CONTENT_INLINE_TAGS =\n  \"routerlink,a,b,abbr,bdi,bdo,cite,code,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,del,ins,button,label,legend,meter,optgroup,option,output,progress,select\".split(\n    \",\",\n  );\n\nconst isExcerptMarker = (node: AnyNode): boolean =>\n  node.type === \"comment\" && node.data.trim() === \"more\";\n\nconst $ = load(\"\");\n\nconst renderHeader = (node: Element): string => {\n  if (\n    node.children.length === 1 &&\n    node.children[0].type === \"tag\" &&\n    node.children[0].tagName === \"a\" &&\n    node.children[0].attribs[\"class\"] === \"header-anchor\"\n  )\n    node.children = (<Element>node.children[0].children[0]).children;\n\n  return node.children\n    .map((node) => (node.type === \"text\" ? node.data : null))\n    .filter(Boolean)\n    .join(\" \")\n    .replace(/\\s+/gu, \" \")\n    .trim();\n};\n\nexport const generatePageIndex = (\n  page: Page<{ excerpt?: string }>,\n  store: Store,\n  customFieldsGetter: SearchProCustomFieldOptions[] = [],\n  indexContent = false,\n): IndexItem[] => {\n  const { contentRendered, data, title } = page;\n  const pageId = <PageIndexId>store.addItem(page.path).toString();\n  const hasExcerpt = \"excerpt\" in data && data[\"excerpt\"].length;\n\n  const pageIndex: PageIndexItem = { id: pageId, h: title };\n  const results: IndexItem[] = [pageIndex];\n\n  // Here are some variables holding the current state of the parser\n  let shouldIndexContent = hasExcerpt || indexContent;\n  let currentSectionIndex: PageIndexItem | SectionIndexItem | null = null;\n  let currentContent = \"\";\n  let isContentBeforeFirstHeader = true;\n\n  const render = (node: AnyNode, preserveSpace = false): void => {\n    if (node.type === \"tag\") {\n      if (HEADING_TAGS.includes(node.name)) {\n        const { id } = node.attribs;\n        const header = renderHeader(node);\n\n        if (currentContent && shouldIndexContent) {\n          // Add last content\n          ((isContentBeforeFirstHeader ? pageIndex : currentSectionIndex!).t ??=\n            []).push(currentContent.replace(/\\s+/gu, \" \"));\n          currentContent = \"\";\n        }\n\n        // Update current section index only if it has an id\n        if (id) {\n          if (isContentBeforeFirstHeader) isContentBeforeFirstHeader = false;\n          else results.push(currentSectionIndex!);\n\n          currentSectionIndex = {\n            id: `${pageId}#${id}`,\n            h: header,\n          };\n        } else if (header) {\n          ((currentSectionIndex ?? pageIndex).t ??= []).push(header);\n        }\n      } else if (CONTENT_BLOCK_TAGS.includes(node.name)) {\n        if (currentContent && shouldIndexContent) {\n          // Add last content\n          ((isContentBeforeFirstHeader ? pageIndex : currentSectionIndex)!.t ??=\n            []).push(currentContent.replace(/\\s+/gu, \" \"));\n          currentContent = \"\";\n        }\n        node.childNodes.forEach((item) =>\n          render(item, preserveSpace || node.name === \"pre\"),\n        );\n      } else if (CONTENT_INLINE_TAGS.includes(node.name)) {\n        node.childNodes.forEach((item) => render(item, preserveSpace));\n      }\n    } else if (node.type === \"text\") {\n      currentContent += preserveSpace || node.data.trim() ? node.data : \"\";\n    } else if (\n      // We are expecting to stop at excerpt marker if content is not indexed\n      hasExcerpt &&\n      !indexContent &&\n      isExcerptMarker(node)\n    ) {\n      shouldIndexContent = false;\n    }\n  };\n\n  const nodes = $.parseHTML(contentRendered);\n\n  // Get custom fields\n  const customFields = fromEntries(\n    customFieldsGetter\n      .map(({ getter }, index) => {\n        const result = getter(page);\n\n        return isArray(result)\n          ? [index.toString(), result]\n          : result\n            ? [index.toString(), [result]]\n            : null;\n      })\n      .filter((item): item is [string, string[]] => item !== null),\n  );\n\n  // No content in page and no customFields\n  if (!nodes?.length && !keys(customFields).length) return [];\n\n  // Walk through nodes and extract indexes\n  nodes?.forEach((node) => {\n    render(node);\n  });\n\n  // Push contents in last block tags\n  if (shouldIndexContent && currentContent)\n    ((isContentBeforeFirstHeader ? pageIndex : currentSectionIndex)!.t ??=\n      []).push(currentContent);\n\n  // Push last section\n  if (currentSectionIndex) results.push(currentSectionIndex);\n\n  // Add custom fields\n  entries(customFields).forEach(([customField, values]) => {\n    results.push({\n      id: `${pageId}@${customField}`,\n      c: values,\n    });\n  });\n\n  return results;\n};\n\nexport const getSearchIndexStore = async (\n  app: App,\n  {\n    customFields,\n    indexContent,\n    filter = (): boolean => true,\n    indexOptions,\n    indexLocaleOptions,\n  }: SearchProOptions,\n  store: Store,\n): Promise<SearchIndexStore> => {\n  const indexesByLocale: LocaleIndex = {};\n\n  app.pages.forEach((page) => {\n    if (filter(page) && page.frontmatter[\"search\"] !== false)\n      (indexesByLocale[page.pathLocale] ??= []).push(\n        ...generatePageIndex(page, store, customFields, indexContent),\n      );\n  });\n\n  const searchIndex: SearchIndexStore = {};\n\n  await Promise.all(\n    entries(indexesByLocale).map(async ([localePath, indexes]) => {\n      const index = createIndex<string, IndexItem, IndexItem>({\n        ...indexOptions,\n        ...indexLocaleOptions?.[localePath],\n        fields: [/** Heading */ \"h\", /** Text */ \"t\", /** CustomFields */ \"c\"],\n        storeFields: [\n          /** Heading */ \"h\",\n          /** Anchor */ \"a\",\n          /** Text */ \"t\",\n          /** CustomFields */ \"c\",\n        ],\n      });\n\n      await addAllAsync(index, indexes);\n\n      searchIndex[localePath] = index;\n    }),\n  );\n\n  return searchIndex;\n};\n","import { Logger, ensureEndingSlash } from \"@vuepress/helper\";\nimport { getDirname, path } from \"vuepress/utils\";\n\nconst __dirname = getDirname(import.meta.url);\n\nexport const CLIENT_FOLDER = ensureEndingSlash(\n  path.resolve(__dirname, \"../client/\"),\n);\n\nexport const WORKER_FILE = path.resolve(__dirname, \"../worker/index.js\");\n\nexport const PLUGIN_NAME = \"vuepress-plugin-search-pro\";\n\nexport const logger = new Logger(PLUGIN_NAME);\n\nexport const getLocaleChunkName = (locale: string): string =>\n  locale.replace(/\\//g, \"\") || \"root\";\n\nexport class Store {\n  store: string[];\n\n  constructor() {\n    this.store = [];\n  }\n\n  addItem(item: string): number {\n    const index = this.store.indexOf(item);\n\n    if (index === -1) {\n      this.store.push(item);\n\n      return this.store.length - 1;\n    }\n\n    return index;\n  }\n\n  addItems(items: string[]): number[] {\n    return items.map((item) => this.addItem(item));\n  }\n\n  clearItem(item: string): void {\n    const index = this.store.indexOf(item);\n\n    if (index !== -1) this.store[index] = \"\";\n  }\n\n  toJSON(): string {\n    return JSON.stringify(this.store);\n  }\n}\n","import type { App } from \"vuepress/core\";\nimport { fs, path } from \"vuepress/utils\";\n\nimport type { SearchProOptions } from \"./options.js\";\nimport { WORKER_FILE } from \"./utils.js\";\nimport type { SearchIndexStore } from \"../shared/index.js\";\n\nexport const generateWorker = async (\n  app: App,\n  options: SearchProOptions,\n  searchStore: SearchIndexStore,\n): Promise<void> => {\n  const workerFilePath = app.dir.dest(options.worker || \"search-pro.worker.js\");\n  const searchIndexContent = JSON.stringify(searchStore);\n\n  const workerFileContent = await fs.readFile(WORKER_FILE, \"utf8\");\n\n  await fs.ensureDir(path.dirname(workerFilePath));\n  await fs.writeFile(\n    workerFilePath,\n    workerFileContent\n      .replace(\n        \"SEARCH_PRO_INDEX\",\n        () => `${JSON.stringify(searchIndexContent)}`,\n      )\n      .replace(\n        \"SEARCH_PRO_SORT_STRATEGY\",\n        JSON.stringify(options.sortStrategy || \"max\"),\n      ),\n  );\n};\n","import type { SearchProLocaleConfig } from \"../shared/index.js\";\n\n/** Multi language config for search-pro popup */\nexport const searchProLocales: SearchProLocaleConfig = {\n  \"/en/\": {\n    cancel: \"Cancel\",\n    placeholder: \"Search\",\n    search: \"Search\",\n    searching: \"Searching\",\n    defaultTitle: \"Documentation\",\n    select: \"to select\",\n    navigate: \"to navigate\",\n    autocomplete: \"to autocomplete\",\n    exit: \"to exit\",\n    queryHistory: \"Search History\",\n    resultHistory: \"Result History\",\n    emptyHistory: \"Empty Search History\",\n    emptyResult: \"No results found\",\n    loading: \"Loading search indexes...\",\n  },\n\n  \"/zh/\": {\n    cancel: \"ÂèñÊ∂à\",\n    placeholder: \"ÊêúÁ¥¢\",\n    search: \"ÊêúÁ¥¢\",\n    searching: \"ÊêúÁ¥¢‰∏≠\",\n    defaultTitle: \"ÊñáÊ°£\",\n    select: \"ÈÄâÊã©\",\n    navigate: \"ÂàáÊç¢\",\n    autocomplete: \"Ëá™Âä®Ë°•ÂÖ®\",\n    exit: \"ÂÖ≥Èó≠\",\n    queryHistory: \"ÊêúÁ¥¢ÂéÜÂè≤\",\n    resultHistory: \"ÂéÜÂè≤ÁªìÊûú\",\n    emptyHistory: \"Êó†ÊêúÁ¥¢ÂéÜÂè≤\",\n    emptyResult: \"Ê≤°ÊúâÊâæÂà∞ÁªìÊûú\",\n    loading: \"Ê≠£Âú®Âä†ËΩΩÊêúÁ¥¢Á¥¢Âºï...\",\n  },\n\n  \"/zh-tw/\": {\n    cancel: \"ÂèñÊ∂à\",\n    placeholder: \"ÊêúÁ¥¢\",\n    search: \"ÊêúÁ¥†\",\n    searching: \"ÊêúÁ¥¢‰∏≠\",\n    defaultTitle: \"ÊñáÊ™î\",\n    select: \"ÈÅ∏Êìá\",\n    navigate: \"ÂàáÊèõ\",\n    autocomplete: \"Ëá™ÂãïË£úÂÖ®\",\n    exit: \"ÈóúÈñâ\",\n    queryHistory: \"ÊêúÁ¥¢Ê≠∑Âè≤\",\n    resultHistory: \"Ê≠∑Âè≤ÁµêÊûú\",\n    emptyHistory: \"ÁÑ°ÊêúÁ¥¢Ê≠∑Âè≤\",\n    emptyResult: \"Ê≤íÊúâÊâæÂà∞ÁµêÊûú\",\n    loading: \"Ê≠£Âú®Âä†ËºâÊêúÁ¥¢Á¥¢Âºï...\",\n  },\n\n  \"/de/\": {\n    cancel: \"Abbrechen\",\n    placeholder: \"Suche\",\n    search: \"Suche\",\n    searching: \"Suche\",\n    defaultTitle: \"Dokumentation\",\n    select: \"ausw√§hlen\",\n    navigate: \"wechseln\",\n    autocomplete: \"automatisch vervollst√§ndigen\",\n    exit: \"schlie√üen\",\n    queryHistory: \"Suchverlauf\",\n    resultHistory: \"Ergebnisverlauf\",\n    emptyHistory: \"Suchverlauf leeren\",\n    emptyResult: \"Keine Ergebnisse gefunden\",\n    loading: \"Suchindex wird geladen...\",\n  },\n\n  \"/de-at/\": {\n    cancel: \"Abbrechen\",\n    placeholder: \"Suche\",\n    search: \"Suche\",\n    searching: \"Suche\",\n    defaultTitle: \"Dokumentation\",\n    select: \"ausw√§hlen\",\n    navigate: \"wechseln\",\n    autocomplete: \"automatisch vervollst√§ndigen\",\n    exit: \"schlie√üen\",\n    queryHistory: \"Suchverlauf\",\n    resultHistory: \"Ergebnisverlauf\",\n    emptyHistory: \"Suchverlauf leeren\",\n    emptyResult: \"Keine Ergebnisse gefunden\",\n    loading: \"Suchindex wird geladen...\",\n  },\n\n  \"/vi/\": {\n    cancel: \"H·ªßy\",\n    placeholder: \"T√¨m ki·∫øm\",\n    search: \"T√¨m ki·∫øm\",\n    searching: \"ƒêang t√¨m ki·∫øm\",\n    defaultTitle: \"T√†i li·ªáu\",\n    select: \"ch·ªçn\",\n    navigate: \"chuy·ªÉn\",\n    autocomplete: \"t·ª± ƒë·ªông ho√†n th√†nh\",\n    exit: \"ƒë√≥ng\",\n    queryHistory: \"L·ªãch s·ª≠ t√¨m ki·∫øm\",\n    resultHistory: \"L·ªãch s·ª≠ k·∫øt qu·∫£\",\n    emptyHistory: \"X√≥a l·ªãch s·ª≠ t√¨m ki·∫øm\",\n    emptyResult: \"Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£\",\n    loading: \"ƒêang t·∫£i ch·ªâ m·ª•c t√¨m ki·∫øm...\",\n  },\n\n  \"/uk/\": {\n    cancel: \"–°–∫–∞—Å—É–≤–∞—Ç–∏\",\n    placeholder: \"–ü–æ—à—É–∫\",\n    search: \"–ü–æ—à—É–∫\",\n    searching: \"–ü–æ—à—É–∫\",\n    defaultTitle: \"–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è\",\n    select: \"–≤–∏–±—Ä–∞—Ç–∏\",\n    navigate: \"–ø–µ—Ä–µ–π—Ç–∏\",\n    autocomplete: \"–∞–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è\",\n    exit: \"–∑–∞–∫—Ä–∏—Ç–∏\",\n    queryHistory: \"–Ü—Å—Ç–æ—Ä—ñ—è –ø–æ—à—É–∫—É\",\n    resultHistory: \"–Ü—Å—Ç–æ—Ä—ñ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤\",\n    emptyHistory: \"–û—á–∏—Å—Ç–∏—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é –ø–æ—à—É–∫—É\",\n    emptyResult: \"–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ\",\n    loading: \"–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—à—É–∫–æ–≤–∏—Ö —ñ–Ω–¥–µ–∫—Å—ñ–≤...\",\n  },\n\n  \"/ru/\": {\n    cancel: \"–û—Ç–º–µ–Ω–∞\",\n    placeholder: \"–ü–æ–∏—Å–∫\",\n    search: \"–ü–æ–∏—Å–∫\",\n    searching: \"–ü–æ–∏—Å–∫\",\n    defaultTitle: \"–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è\",\n    select: \"–≤—ã–±—Ä–∞—Ç—å\",\n    navigate: \"–ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å\",\n    autocomplete: \"–∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ\",\n    exit: \"–∑–∞–∫—Ä—ã—Ç—å\",\n    queryHistory: \"–ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞\",\n    resultHistory: \"–ò—Å—Ç–æ—Ä–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤\",\n    emptyHistory: \"–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–æ–∏—Å–∫–∞\",\n    emptyResult: \"–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ\",\n    loading: \"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤...\",\n  },\n\n  \"/br/\": {\n    cancel: \"Cancelar\",\n    placeholder: \"Pesquisar\",\n    search: \"Pesquisar\",\n    searching: \"Pesquisando\",\n    defaultTitle: \"Documenta√ß√£o\",\n    select: \"selecionar\",\n    navigate: \"navegar\",\n    autocomplete: \"autocompletar\",\n    exit: \"fechar\",\n    queryHistory: \"Hist√≥rico de pesquisa\",\n    resultHistory: \"Hist√≥rico de resultados\",\n    emptyHistory: \"Limpar hist√≥rico de pesquisa\",\n    emptyResult: \"Nenhum resultado encontrado\",\n    loading: \"Carregando √≠ndices de pesquisa...\",\n  },\n\n  \"/pl/\": {\n    cancel: \"Anuluj\",\n    placeholder: \"Szukaj\",\n    search: \"Szukaj\",\n    searching: \"Szukanie\",\n    defaultTitle: \"Dokumentacja\",\n    select: \"wybierz\",\n    navigate: \"przejd≈∫\",\n    autocomplete: \"autouzupe≈Çnianie\",\n    exit: \"zamknij\",\n    queryHistory: \"Historia wyszukiwania\",\n    resultHistory: \"Historia wynik√≥w\",\n    emptyHistory: \"Wyczy≈õƒá historiƒô wyszukiwania\",\n    emptyResult: \"Nie znaleziono wynik√≥w\",\n    loading: \"≈Åadowanie indeks√≥w wyszukiwania...\",\n  },\n\n  \"/sk/\": {\n    cancel: \"Zru≈°i≈•\",\n    placeholder: \"Hƒæada≈•\",\n    search: \"Hƒæada≈•\",\n    searching: \"Hƒæadanie\",\n    defaultTitle: \"Dokument√°cia\",\n    select: \"vybra≈•\",\n    navigate: \"prepn√∫≈•\",\n    autocomplete: \"automatick√© dopƒ∫≈àanie\",\n    exit: \"zavrie≈•\",\n    queryHistory: \"Hist√≥ria vyhƒæad√°vania\",\n    resultHistory: \"Hist√≥ria v√Ωsledkov\",\n    emptyHistory: \"Vymaza≈• hist√≥riu vyhƒæad√°vania\",\n    emptyResult: \"Nena≈°li sa ≈æiadne v√Ωsledky\",\n    loading: \"Naƒç√≠tavaj√∫ sa vyhƒæad√°vacie indexy...\",\n  },\n\n  \"/fr/\": {\n    cancel: \"Annuler\",\n    placeholder: \"Rechercher\",\n    search: \"Rechercher\",\n    searching: \"Recherche\",\n    defaultTitle: \"Documentation\",\n    select: \"s√©lectionner\",\n    navigate: \"naviguer\",\n    autocomplete: \"auto-compl√©tion\",\n    exit: \"fermer\",\n    queryHistory: \"Historique de recherche\",\n    resultHistory: \"Historique des r√©sultats\",\n    emptyHistory: \"Vider l'historique de recherche\",\n    emptyResult: \"Aucun r√©sultat trouv√©\",\n    loading: \"Chargement des index de recherche...\",\n  },\n\n  \"/es/\": {\n    cancel: \"Cancelar\",\n    placeholder: \"Buscar\",\n    search: \"Buscar\",\n    searching: \"Buscando\",\n    defaultTitle: \"Documentaci√≥n\",\n    select: \"seleccionar\",\n    navigate: \"navegar\",\n    autocomplete: \"autocompletar\",\n    exit: \"cerrar\",\n    queryHistory: \"Historial de b√∫squeda\",\n    resultHistory: \"Historial de resultados\",\n    emptyHistory: \"Vaciar historial de b√∫squeda\",\n    emptyResult: \"No se encontraron resultados\",\n    loading: \"Cargando √≠ndices de b√∫squeda...\",\n  },\n\n  \"/ja/\": {\n    cancel: \"„Ç≠„É£„É≥„Çª„É´\",\n    placeholder: \"Ê§úÁ¥¢\",\n    search: \"Ê§úÁ¥¢\",\n    searching: \"Ê§úÁ¥¢‰∏≠\",\n    defaultTitle: \"„Éâ„Ç≠„É•„É°„É≥„Éà\",\n    select: \"ÈÅ∏Êäû\",\n    navigate: \"Âàá„ÇäÊõø„Åà\",\n    autocomplete: \"„Ç™„Éº„Éà„Ç≥„É≥„Éó„É™„Éº„Éà\",\n    exit: \"Èñâ„Åò„Çã\",\n    queryHistory: \"Ê§úÁ¥¢Â±•Ê≠¥\",\n    resultHistory: \"ÁµêÊûúÂ±•Ê≠¥\",\n    emptyHistory: \"Ê§úÁ¥¢Â±•Ê≠¥„Çí„ÇØ„É™„Ç¢\",\n    emptyResult: \"ÁµêÊûú„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì\",\n    loading: \"Ê§úÁ¥¢„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ„ÇíË™≠„ÅøËæº„Çì„Åß„ÅÑ„Åæ„Åô...\",\n  },\n\n  \"/tr/\": {\n    cancel: \"ƒ∞ptal\",\n    placeholder: \"Ara\",\n    search: \"Ara\",\n    searching: \"Aranƒ±yor\",\n    defaultTitle: \"D√∂k√ºmantasyon\",\n    select: \"se√ß\",\n    navigate: \"ge√ß\",\n    autocomplete: \"otomatik tamamlama\",\n    exit: \"kapat\",\n    queryHistory: \"Arama ge√ßmi≈üi\",\n    resultHistory: \"Sonu√ß ge√ßmi≈üi\",\n    emptyHistory: \"Arama ge√ßmi≈üini temizle\",\n    emptyResult: \"Sonu√ß bulunamadƒ±\",\n    loading: \"Arama dizinleri y√ºkleniyor...\",\n  },\n\n  \"/ko/\": {\n    cancel: \"Ï∑®ÏÜå\",\n    placeholder: \"Í≤ÄÏÉâ\",\n    search: \"Í≤ÄÏÉâ\",\n    searching: \"Í≤ÄÏÉâ Ï§ë\",\n    defaultTitle: \"Î¨∏ÏÑú\",\n    select: \"ÏÑ†ÌÉù\",\n    navigate: \"Ïù¥Îèô\",\n    autocomplete: \"ÏûêÎèô ÏôÑÏÑ±\",\n    exit: \"Îã´Í∏∞\",\n    queryHistory: \"Í≤ÄÏÉâ Í∏∞Î°ù\",\n    resultHistory: \"Í≤∞Í≥º Í∏∞Î°ù\",\n    emptyHistory: \"Í≤ÄÏÉâ Í∏∞Î°ù ÏßÄÏö∞Í∏∞\",\n    emptyResult: \"Í≤∞Í≥ºÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§\",\n    loading: \"Í≤ÄÏÉâ Ïù∏Îç±Ïä§Î•º Î°úÎìúÌïòÎäî Ï§ë...\",\n  },\n\n  \"/fi/\": {\n    cancel: \"Peruuta\",\n    placeholder: \"Etsi\",\n    search: \"Etsi\",\n    searching: \"Etsit√§√§n\",\n    defaultTitle: \"Dokumentaatio\",\n    select: \"valitaksesi\",\n    navigate: \"navigoidaksesi\",\n    autocomplete: \"automaattinen t√§ydennys\",\n    exit: \"poistuaksesi\",\n    queryHistory: \"Hakuhistoria\",\n    resultHistory: \"Tuloshistoria\",\n    emptyHistory: \"Tyhjenn√§ hakuhistoria\",\n    emptyResult: \"Tuloksia ei l√∂ytynyt\",\n    loading: \"Ladataan hakuindeksi√§...\",\n  },\n\n  \"/hu/\": {\n    cancel: \"M√©gse\",\n    placeholder: \"Keres√©s\",\n    search: \"Keres√©s\",\n    searching: \"Keres√©s\",\n    defaultTitle: \"Dokument√°ci√≥\",\n    select: \"kiv√°laszt√°shoz\",\n    navigate: \"navig√°l√°shoz\",\n    autocomplete: \"automatikus kieg√©sz√≠t√©s\",\n    exit: \"kil√©p√©shez\",\n    queryHistory: \"Keres√©si el≈ëzm√©nyek\",\n    resultHistory: \"Eredm√©nyek el≈ëzm√©nyei\",\n    emptyHistory: \"√úres keres√©si el≈ëzm√©nyek\",\n    emptyResult: \"Nincs tal√°lat\",\n    loading: \"A keres√©si indexek bet√∂lt√©se...\",\n  },\n\n  \"/id/\": {\n    cancel: \"Batal\",\n    placeholder: \"Cari sesuatu üîé\",\n    search: \"Cari\",\n    searching: \"Sedang mencari\",\n    defaultTitle: \"Dokumentasi\",\n    select: \"pilih\",\n    navigate: \"navigasi\",\n    autocomplete: \"autoselesai\",\n    exit: \"keluar\",\n    queryHistory: \"Riwayat Penelusuran\",\n    resultHistory: \"Riwayat Hasil\",\n    emptyHistory: \"Tidak ada riwayat penelusuran\",\n    emptyResult: \"Hasil penelusuran tidak tersedia\",\n    loading: \"Memuat indeks penelusuran...\",\n  },\n\n  \"/nl/\": {\n    cancel: \"Annuleren\",\n    placeholder: \"Zoeken\",\n    search: \"Zoeken\",\n    searching: \"Zoeken\",\n    defaultTitle: \"Documentatie\",\n    select: \"Selecteren\",\n    navigate: \"to navigate\",\n    autocomplete: \"autocompletion\",\n    exit: \"to exit\",\n    queryHistory: \"Zoekgeschiedenis\",\n    resultHistory: \"Resultaatgeschiedenis\",\n    emptyHistory: \"Zoekgeschiedenis Leegmaken\",\n    emptyResult: \"Geen resultaten gevonden\",\n    loading: \"Laden van zoekindexen...\",\n  },\n};\n","import { entries, keys } from \"@vuepress/helper\";\nimport { addAll, discard, vacuum } from \"slimsearch\";\nimport type { App } from \"vuepress/core\";\n\nimport type { PageIndexId, SearchIndexStore } from \"../../shared/index.js\";\nimport { generatePageIndex } from \"../generateIndex.js\";\nimport type { SearchProOptions } from \"../options.js\";\nimport type { Store } from \"../utils.js\";\nimport { getLocaleChunkName } from \"../utils.js\";\n\nexport const prepareSearchIndex = async (\n  app: App,\n  searchIndexStore: SearchIndexStore,\n): Promise<void> => {\n  await Promise.all(\n    entries(searchIndexStore).map(([locale, documents]) =>\n      app.writeTemp(\n        `search-pro/${getLocaleChunkName(locale)}.js`,\n        `export default ${JSON.stringify(JSON.stringify(documents))};`,\n      ),\n    ),\n  );\n\n  await app.writeTemp(\n    `search-pro/index.js`,\n    `export default {${keys(searchIndexStore)\n      .map(\n        (locale) =>\n          `${JSON.stringify(locale)}: () => import('./${getLocaleChunkName(\n            locale,\n          )}.js')`,\n      )\n      .join(\",\")}}`,\n  );\n};\n\nexport const updateSearchIndex = async (\n  app: App,\n  options: SearchProOptions,\n  searchIndexStore: SearchIndexStore,\n  store: Store,\n  path: string,\n): Promise<void> => {\n  const actualPath = path\n    .replace(/^pages\\//, \"\")\n    .replace(/\\/index\\.html\\.vue/, \"/README.md\")\n    .replace(/\\.html\\.vue/, \".md\");\n\n  const page = app.pages.find(\n    ({ filePathRelative }) =>\n      filePathRelative?.toLowerCase() === actualPath.toLowerCase(),\n  )!;\n\n  if (page) {\n    const pageIndexes = generatePageIndex(\n      page,\n      store,\n      options.customFields,\n      options.indexContent,\n    );\n    const { pathLocale } = page;\n    const pageId = <PageIndexId>store.addItem(page.path).toString();\n    const localeSearchIndex = searchIndexStore[pathLocale];\n\n    // Update index\n    if (pageIndexes) {\n      // Remove previous index\n      Array.from(localeSearchIndex._documentIds.values())\n        .filter((id) => id.startsWith(pageId))\n        .forEach((id) => discard(localeSearchIndex, id));\n\n      addAll(localeSearchIndex, pageIndexes);\n\n      await vacuum(localeSearchIndex);\n\n      // Search index file content\n      const content = `\\\nexport default ${JSON.stringify(JSON.stringify(localeSearchIndex))}\n`;\n\n      await app.writeTemp(\n        `search-pro/${getLocaleChunkName(pathLocale)}.js`,\n        content,\n      );\n\n      return;\n    }\n  }\n};\n\nexport const removeSearchIndex = async (\n  app: App,\n  searchIndexStore: SearchIndexStore,\n  store: Store,\n  path: string,\n): Promise<void> => {\n  const actualPath = path\n    .replace(/^pages\\//, \"\")\n    .replace(/\\/index\\.html\\.vue/, \"/readme.md\")\n    .replace(/\\.html\\.vue/, \".md\");\n\n  const { pages, writeTemp } = app;\n\n  const page = pages.find(\n    ({ filePathRelative }) =>\n      filePathRelative?.toLowerCase() === actualPath.toLowerCase(),\n  )!;\n\n  if (page) {\n    const { pathLocale } = page;\n    const pageId = <PageIndexId>store.addItem(page.path).toString();\n    const localeSearchIndex = searchIndexStore[pathLocale];\n\n    // Remove previous index\n    Array.from(localeSearchIndex._documentIds.values())\n      .filter((id) => id.startsWith(pageId))\n      .forEach((id) => discard(localeSearchIndex, id));\n\n    await vacuum(localeSearchIndex);\n\n    // Search index file content\n    const content = `\\\nexport default ${JSON.stringify(JSON.stringify(localeSearchIndex))}\n`;\n\n    await writeTemp(`search-pro/${getLocaleChunkName(pathLocale)}.js`, content);\n\n    return;\n  }\n};\n","import type { App } from \"vuepress/core\";\n\nimport type { Store } from \"../utils.js\";\n\nexport const prepareStore = async (app: App, store: Store): Promise<void> => {\n  await app.writeTemp(\n    `search-pro/store.js`,\n    `\\\nexport const store = ${store.toJSON()};\n`,\n  );\n};\n","import {\n  addViteOptimizeDepsInclude,\n  addViteSsrNoExternal,\n  fromEntries,\n  getLocaleConfig,\n} from \"@vuepress/helper\";\nimport { watch } from \"chokidar\";\nimport type { PluginFunction } from \"vuepress/core\";\nimport { useSassPalettePlugin } from \"vuepress-plugin-sass-palette\";\n\nimport { convertOptions } from \"./compact.js\";\nimport { setPageExcerpt } from \"./excerpt.js\";\nimport { getSearchIndexStore } from \"./generateIndex.js\";\nimport { generateWorker } from \"./generateWorker.js\";\nimport { searchProLocales } from \"./locales.js\";\nimport type { SearchProOptions } from \"./options.js\";\nimport {\n  prepareSearchIndex,\n  prepareStore,\n  removeSearchIndex,\n  updateSearchIndex,\n} from \"./prepare/index.js\";\nimport { CLIENT_FOLDER, PLUGIN_NAME, Store, logger } from \"./utils.js\";\nimport type { SearchIndexStore } from \"../shared/index.js\";\n\nexport const searchProPlugin =\n  (options: SearchProOptions, legacy = true): PluginFunction =>\n  (app) => {\n    // TODO: Remove this in v2 stable\n    if (legacy)\n      convertOptions(options as SearchProOptions & Record<string, unknown>);\n\n    if (app.env.isDebug) logger.info(\"Options:\", options);\n\n    useSassPalettePlugin(app, { id: \"hope\" });\n\n    const store = new Store();\n    let searchIndexStore: SearchIndexStore | null = null;\n\n    return {\n      name: PLUGIN_NAME,\n\n      alias: {\n        [`${PLUGIN_NAME}/result`]: `${CLIENT_FOLDER}components/SearchResult.js`,\n      },\n\n      define: {\n        SEARCH_PRO_ENABLE_AUTO_SUGGESTIONS: options.autoSuggestions !== false,\n        SEARCH_PRO_CUSTOM_FIELDS: fromEntries(\n          (options.customFields || [])\n            .map(({ formatter }, index) =>\n              formatter ? [index.toString(), formatter] : null,\n            )\n            .filter((item): item is [string, string] => item !== null),\n        ),\n        SEARCH_PRO_LOCALES: getLocaleConfig({\n          app,\n          name: PLUGIN_NAME,\n          config: options.locales,\n          default: searchProLocales,\n        }),\n        SEARCH_PRO_OPTIONS: {\n          searchDelay: options.searchDelay ?? 150,\n          suggestDelay: options.suggestDelay ?? 0,\n          queryHistoryCount: options.queryHistoryCount ?? 5,\n          resultHistoryCount: options.resultHistoryCount ?? 5,\n          hotKeys: options.hotKeys || [\n            { key: \"k\", ctrl: true },\n            { key: \"/\", ctrl: true },\n          ],\n          worker: options.worker || \"search-pro.worker.js\",\n        },\n        SEARCH_PRO_SORT_STRATEGY: JSON.stringify(options.sortStrategy || \"max\"),\n      },\n\n      clientConfigFile: `${CLIENT_FOLDER}config.js`,\n\n      extendsBundlerOptions: (bundlerOptions: unknown, app): void => {\n        addViteOptimizeDepsInclude(bundlerOptions, app, \"slimsearch\", true);\n        addViteSsrNoExternal(bundlerOptions, app, [\n          \"@vuepress/helper\",\n          \"fflate\",\n          \"vuepress-shared\",\n        ]);\n      },\n\n      onInitialized: async (app): Promise<void> => {\n        setPageExcerpt(app);\n        searchIndexStore = await getSearchIndexStore(app, options, store);\n      },\n\n      onPrepared: async (app): Promise<void> => {\n        if (app.env.isDev) await prepareSearchIndex(app, searchIndexStore!);\n        await prepareStore(app, store);\n      },\n\n      onWatched: (app, watchers): void => {\n        const hotReload =\n          \"hotReload\" in options ? options.hotReload : app.env.isDebug;\n\n        if (hotReload) {\n          // This ensure the page is generated or updated\n          const searchIndexWatcher = watch(\"pages/**/*.vue\", {\n            cwd: app.dir.temp(),\n            ignoreInitial: true,\n          });\n\n          searchIndexWatcher.on(\"add\", (path) => {\n            void updateSearchIndex(\n              app,\n              options,\n              searchIndexStore!,\n              store,\n              path,\n            );\n          });\n          searchIndexWatcher.on(\"change\", (path) => {\n            void updateSearchIndex(\n              app,\n              options,\n              searchIndexStore!,\n              store,\n              path,\n            );\n          });\n          searchIndexWatcher.on(\"unlink\", (path) => {\n            void removeSearchIndex(app, searchIndexStore!, store, path);\n          });\n\n          watchers.push(searchIndexWatcher);\n        }\n      },\n\n      onGenerated: (app) => generateWorker(app, options, searchIndexStore!),\n    };\n  };\n","import type { SearchIndex } from \"slimsearch\";\n\nexport const enum IndexField {\n  heading = \"h\",\n  anchor = \"a\",\n  text = \"t\",\n  customFields = \"c\",\n}\n\nexport type PageIndexId = `${number}`;\n\nexport interface PageIndexItem {\n  id: PageIndexId;\n  /** Heading */ h: string;\n  /** Text */ t?: string[];\n}\n\nexport type SectionIndexId = `${PageIndexId}#${string}`;\n\nexport interface SectionIndexItem {\n  id: SectionIndexId;\n  /** Heading */ h: string;\n  /** Text */ t?: string[];\n}\n\nexport type CustomFieldIndexID = `${PageIndexId}@${number}`;\n\nexport interface CustomFieldIndexItem {\n  id: string;\n  /** CustomFields */ c: string[];\n}\n\nexport type IndexItem = PageIndexItem | SectionIndexItem | CustomFieldIndexItem;\n\nexport type LocaleIndex = Record<string, IndexItem[]>;\n\nexport type SearchIndexStore = Record<\n  string,\n  SearchIndex<string, IndexItem, IndexItem>\n>;\n"],"names":["convertOptions","options","deprecatedLogger","createConverter","setPageExcerpt","app","pages","pluginApi","name","page","getPageExcerpt","HEADING_TAGS","CONTENT_BLOCK_TAGS","CONTENT_INLINE_TAGS","isExcerptMarker","node","$","load","renderHeader","generatePageIndex","store","customFieldsGetter","indexContent","contentRendered","data","title","pageId","hasExcerpt","pageIndex","results","shouldIndexContent","currentSectionIndex","currentContent","isContentBeforeFirstHeader","render","preserveSpace","id","header","item","nodes","customFields","fromEntries","getter","index","result","isArray","keys","entries","customField","values","getSearchIndexStore","filter","indexOptions","indexLocaleOptions","indexesByLocale","searchIndex","localePath","indexes","createIndex","addAllAsync","__dirname","getDirname","CLIENT_FOLDER","ensureEndingSlash","path","WORKER_FILE","PLUGIN_NAME","logger","Logger","getLocaleChunkName","locale","Store","items","generateWorker","searchStore","workerFilePath","searchIndexContent","workerFileContent","fs","searchProLocales","prepareSearchIndex","searchIndexStore","documents","updateSearchIndex","actualPath","filePathRelative","pageIndexes","pathLocale","localeSearchIndex","discard","addAll","vacuum","content","removeSearchIndex","writeTemp","prepareStore","searchProPlugin","legacy","useSassPalettePlugin","formatter","getLocaleConfig","bundlerOptions","addViteOptimizeDepsInclude","addViteSsrNoExternal","watchers","searchIndexWatcher","watch","IndexField"],"mappings":"ijBAKO,MAAMA,EACXC,GACS,CACT,KAAM,CAAE,iBAAAC,CAAiB,EAAIC,EAAgB,YAAY,EAEzDD,EAAiB,CACf,QAAAD,EACA,IAAK,YACL,IAAK,cACP,CAAC,EACDC,EAAiB,CACf,QAAAD,EACA,IAAK,eACL,IAAK,oBACP,CAAC,EACDC,EAAiB,CACf,QAAAD,EACA,IAAK,QACL,IAAK,aACP,CAAC,CACH,ECtBaG,EAAkBC,GAAmB,CAChD,KAAM,CAAE,MAAAC,EAAO,UAAAC,CAAU,EAAIF,EACDE,EAAU,QAAQ,KAC5C,CAAC,CAAE,KAAAC,CAAK,IAAMA,IAAS,uBACzB,GAEyBF,EAAM,KAAMG,GAAS,YAAaA,EAAK,IAAI,GAGlEH,EAAM,QAASG,GAAqC,CAClDA,EAAK,KAAK,QAAaC,EAAeL,EAAKI,EAAM,CAC/C,OAAQ,GACV,CAAC,CACH,CAAC,CACL,ECUME,EAAe,iBAAiB,MAAM,GAAG,EAKzCC,GACJ,iOAAiO,MAC/N,GACF,EAOIC,GACJ,gMAAgM,MAC9L,GACF,EAEIC,GAAmBC,GACvBA,EAAK,OAAS,WAAaA,EAAK,KAAK,KAAW,IAAA,OAE5CC,GAAIC,EAAK,EAAE,EAEXC,GAAgBH,IAElBA,EAAK,SAAS,SAAW,GACzBA,EAAK,SAAS,CAAC,EAAE,OAAS,OAC1BA,EAAK,SAAS,CAAC,EAAE,UAAY,KAC7BA,EAAK,SAAS,CAAC,EAAE,QAAQ,QAAa,kBAEtCA,EAAK,SAAqBA,EAAK,SAAS,CAAC,EAAE,SAAS,CAAC,EAAG,UAEnDA,EAAK,SACT,IAAKA,GAAUA,EAAK,OAAS,OAASA,EAAK,KAAO,IAAK,EACvD,OAAO,OAAO,EACd,KAAK,GAAG,EACR,QAAQ,QAAS,GAAG,EACpB,KAAK,GAGGI,EAAoB,CAC/BV,EACAW,EACAC,EAAoD,CAAA,EACpDC,EAAe,KACC,CAChB,KAAM,CAAE,gBAAAC,EAAiB,KAAAC,EAAM,MAAAC,CAAM,EAAIhB,EACnCiB,EAAsBN,EAAM,QAAQX,EAAK,IAAI,EAAE,SAAS,EACxDkB,EAAa,YAAaH,GAAQA,EAAK,QAAW,OAElDI,EAA2B,CAAE,GAAIF,EAAQ,EAAGD,CAAM,EAClDI,EAAuB,CAACD,CAAS,EAGvC,IAAIE,EAAqBH,GAAcL,EACnCS,EAA+D,KAC/DC,EAAiB,GACjBC,EAA6B,GAEjC,MAAMC,EAAS,CAACnB,EAAeoB,EAAgB,KAAgB,CAC7D,GAAIpB,EAAK,OAAS,MAChB,GAAIJ,EAAa,SAASI,EAAK,IAAI,EAAG,CACpC,KAAM,CAAE,GAAAqB,CAAG,EAAIrB,EAAK,QACdsB,EAASnB,GAAaH,CAAI,EAE5BiB,GAAkBF,MAElBG,EAA6BL,EAAYG,GAAsB,IAC/D,CAAC,GAAG,KAAKC,EAAe,QAAQ,QAAS,GAAG,CAAC,EAC/CA,EAAiB,IAIfI,GACEH,EAA4BA,EAA6B,GACxDJ,EAAQ,KAAKE,CAAoB,EAEtCA,EAAsB,CACpB,GAAI,GAAGL,CAAM,IAAIU,CAAE,GACnB,EAAGC,CACL,GACSA,KACPN,GAAuBH,GAAW,IAAM,CAAA,GAAI,KAAKS,CAAM,CAE7D,MAAWzB,GAAmB,SAASG,EAAK,IAAI,GAC1CiB,GAAkBF,MAElBG,EAA6BL,EAAYG,GAAsB,IAC/D,IAAI,KAAKC,EAAe,QAAQ,QAAS,GAAG,CAAC,EAC/CA,EAAiB,IAEnBjB,EAAK,WAAW,QAASuB,GACvBJ,EAAOI,EAAMH,GAAiBpB,EAAK,OAAS,KAAK,CACnD,GACSF,GAAoB,SAASE,EAAK,IAAI,GAC/CA,EAAK,WAAW,QAASuB,GAASJ,EAAOI,EAAMH,CAAa,CAAC,OAEtDpB,EAAK,OAAS,OACvBiB,GAAkBG,GAAiBpB,EAAK,KAAK,OAASA,EAAK,KAAO,GAGlEY,GACA,CAACL,GACDR,GAAgBC,CAAI,IAEpBe,EAAqB,GAEzB,EAEMS,EAAQvB,GAAE,UAAUO,CAAe,EAGnCiB,EAAeC,EACnBpB,EACG,IAAI,CAAC,CAAE,OAAAqB,CAAO,EAAGC,IAAU,CAC1B,MAAMC,EAASF,EAAOjC,CAAI,EAE1B,OAAOoC,EAAQD,CAAM,EACjB,CAACD,EAAM,SAAS,EAAGC,CAAM,EACzBA,EACE,CAACD,EAAM,SAAY,EAAA,CAACC,CAAM,CAAC,EAC3B,IACR,CAAC,EACA,OAAQN,GAAqCA,IAAS,IAAI,CAC/D,EAGA,MAAI,CAACC,GAAO,QAAU,CAACO,EAAKN,CAAY,EAAE,OAAe,CAAC,GAG1DD,GAAO,QAASxB,GAAS,CACvBmB,EAAOnB,CAAI,CACb,CAAC,EAGGe,GAAsBE,KACtBC,EAA6BL,EAAYG,GAAsB,IAC/D,IAAI,KAAKC,CAAc,EAGvBD,GAAqBF,EAAQ,KAAKE,CAAmB,EAGzDgB,EAAQP,CAAY,EAAE,QAAQ,CAAC,CAACQ,EAAaC,CAAM,IAAM,CACvDpB,EAAQ,KAAK,CACX,GAAI,GAAGH,CAAM,IAAIsB,CAAW,GAC5B,EAAGC,CACL,CAAC,CACH,CAAC,EAEMpB,EACT,EAEaqB,GAAsB,MACjC7C,EACA,CACE,aAAAmC,EACA,aAAAlB,EACA,OAAA6B,EAAS,IAAe,GACxB,aAAAC,EACA,mBAAAC,CACF,EACAjC,IAC8B,CAC9B,MAAMkC,EAA+B,CAErCjD,EAAAA,EAAI,MAAM,QAASI,GAAS,CACtB0C,EAAO1C,CAAI,GAAKA,EAAK,YAAY,SAAc,KAChD6C,EAAgB7C,EAAK,UAAU,IAAM,IAAI,KACxC,GAAGU,EAAkBV,EAAMW,EAAOoB,EAAclB,CAAY,CAC9D,CACJ,CAAC,EAED,MAAMiC,EAAgC,CAEtC,EAAA,OAAA,MAAM,QAAQ,IACZR,EAAQO,CAAe,EAAE,IAAI,MAAO,CAACE,EAAYC,CAAO,IAAM,CAC5D,MAAMd,EAAQe,EAA0C,CACtD,GAAGN,EACH,GAAGC,IAAqBG,CAAU,EAClC,OAAQ,CAAgB,IAAiB,IAAyB,GAAG,EACrE,YAAa,CACI,IACD,IACF,IACQ,GACtB,CACF,CAAC,EAED,MAAMG,EAAYhB,EAAOc,CAAO,EAEhCF,EAAYC,CAAU,EAAIb,CAC5B,CAAC,CACH,EAEOY,CACT,EC9NMK,EAAYC,EAAW,YAAY,GAAG,EAE/BC,EAAgBC,EAC3BC,EAAK,QAAQJ,EAAW,YAAY,CACtC,EAEaK,GAAcD,EAAK,QAAQJ,EAAW,oBAAoB,EAE1DM,EAAc,6BAEdC,GAAS,IAAIC,EAAOF,CAAW,EAE/BG,EAAsBC,GACjCA,EAAO,QAAQ,MAAO,EAAE,GAAK,OAExB,MAAMC,EAAM,CAGjB,aAAc,CACZ,KAAK,MAAQ,CACf,CAAA,CAEA,QAAQjC,EAAsB,CAC5B,MAAMK,EAAQ,KAAK,MAAM,QAAQL,CAAI,EAErC,OAAIK,IAAU,IACZ,KAAK,MAAM,KAAKL,CAAI,EAEb,KAAK,MAAM,OAAS,GAGtBK,CACT,CAEA,SAAS6B,EAA2B,CAClC,OAAOA,EAAM,IAAKlC,GAAS,KAAK,QAAQA,CAAI,CAAC,CAC/C,CAEA,UAAUA,EAAoB,CAC5B,MAAMK,EAAQ,KAAK,MAAM,QAAQL,CAAI,EAEjCK,IAAU,KAAI,KAAK,MAAMA,CAAK,EAAI,GACxC,CAEA,QAAiB,CACf,OAAO,KAAK,UAAU,KAAK,KAAK,CAClC,CACF,CC3Ca,MAAA8B,GAAiB,MAC5BpE,EACAJ,EACAyE,IACkB,CAClB,MAAMC,EAAiBtE,EAAI,IAAI,KAAKJ,EAAQ,QAAU,sBAAsB,EACtE2E,EAAqB,KAAK,UAAUF,CAAW,EAE/CG,EAAoB,MAAMC,EAAG,SAASb,GAAa,MAAM,EAE/D,MAAMa,EAAG,UAAUd,EAAK,QAAQW,CAAc,CAAC,EAC/C,MAAMG,EAAG,UACPH,EACAE,EACG,QACC,mBACA,IAAM,GAAG,KAAK,UAAUD,CAAkB,CAAC,EAC7C,EACC,QACC,2BACA,KAAK,UAAU3E,EAAQ,cAAgB,KAAK,CAC9C,CACJ,CACF,EC3Ba8E,GAA0C,CACrD,OAAQ,CACN,OAAQ,SACR,YAAa,SACb,OAAQ,SACR,UAAW,YACX,aAAc,gBACd,OAAQ,YACR,SAAU,cACV,aAAc,kBACd,KAAM,UACN,aAAc,iBACd,cAAe,iBACf,aAAc,uBACd,YAAa,mBACb,QAAS,2BACX,EAEA,OAAQ,CACN,OAAQ,KACR,YAAa,KACb,OAAQ,KACR,UAAW,MACX,aAAc,KACd,OAAQ,KACR,SAAU,KACV,aAAc,OACd,KAAM,KACN,aAAc,OACd,cAAe,OACf,aAAc,QACd,YAAa,SACb,QAAS,aACX,EAEA,UAAW,CACT,OAAQ,KACR,YAAa,KACb,OAAQ,KACR,UAAW,MACX,aAAc,KACd,OAAQ,KACR,SAAU,KACV,aAAc,OACd,KAAM,KACN,aAAc,OACd,cAAe,OACf,aAAc,QACd,YAAa,SACb,QAAS,aACX,EAEA,OAAQ,CACN,OAAQ,YACR,YAAa,QACb,OAAQ,QACR,UAAW,QACX,aAAc,gBACd,OAAQ,YACR,SAAU,WACV,aAAc,+BACd,KAAM,YACN,aAAc,cACd,cAAe,kBACf,aAAc,qBACd,YAAa,4BACb,QAAS,2BACX,EAEA,UAAW,CACT,OAAQ,YACR,YAAa,QACb,OAAQ,QACR,UAAW,QACX,aAAc,gBACd,OAAQ,YACR,SAAU,WACV,aAAc,+BACd,KAAM,YACN,aAAc,cACd,cAAe,kBACf,aAAc,qBACd,YAAa,4BACb,QAAS,2BACX,EAEA,OAAQ,CACN,OAAQ,MACR,YAAa,WACb,OAAQ,WACR,UAAW,gBACX,aAAc,WACd,OAAQ,OACR,SAAU,SACV,aAAc,qBACd,KAAM,OACN,aAAc,mBACd,cAAe,kBACf,aAAc,uBACd,YAAa,yBACb,QAAS,8BACX,EAEA,OAAQ,CACN,OAAQ,YACR,YAAa,QACb,OAAQ,QACR,UAAW,QACX,aAAc,eACd,OAAQ,UACR,SAAU,UACV,aAAc,iBACd,KAAM,UACN,aAAc,iBACd,cAAe,sBACf,aAAc,0BACd,YAAa,qBACb,QAAS,oCACX,EAEA,OAAQ,CACN,OAAQ,SACR,YAAa,QACb,OAAQ,QACR,UAAW,QACX,aAAc,eACd,OAAQ,UACR,SAAU,cACV,aAAc,iBACd,KAAM,UACN,aAAc,iBACd,cAAe,sBACf,aAAc,0BACd,YAAa,oBACb,QAAS,gCACX,EAEA,OAAQ,CACN,OAAQ,WACR,YAAa,YACb,OAAQ,YACR,UAAW,cACX,aAAc,eACd,OAAQ,aACR,SAAU,UACV,aAAc,gBACd,KAAM,SACN,aAAc,wBACd,cAAe,0BACf,aAAc,+BACd,YAAa,8BACb,QAAS,mCACX,EAEA,OAAQ,CACN,OAAQ,SACR,YAAa,SACb,OAAQ,SACR,UAAW,WACX,aAAc,eACd,OAAQ,UACR,SAAU,UACV,aAAc,mBACd,KAAM,UACN,aAAc,wBACd,cAAe,mBACf,aAAc,gCACd,YAAa,yBACb,QAAS,oCACX,EAEA,OAAQ,CACN,OAAQ,SACR,YAAa,SACb,OAAQ,SACR,UAAW,WACX,aAAc,eACd,OAAQ,SACR,SAAU,UACV,aAAc,wBACd,KAAM,UACN,aAAc,wBACd,cAAe,qBACf,aAAc,gCACd,YAAa,6BACb,QAAS,sCACX,EAEA,OAAQ,CACN,OAAQ,UACR,YAAa,aACb,OAAQ,aACR,UAAW,YACX,aAAc,gBACd,OAAQ,eACR,SAAU,WACV,aAAc,kBACd,KAAM,SACN,aAAc,0BACd,cAAe,2BACf,aAAc,kCACd,YAAa,wBACb,QAAS,sCACX,EAEA,OAAQ,CACN,OAAQ,WACR,YAAa,SACb,OAAQ,SACR,UAAW,WACX,aAAc,gBACd,OAAQ,cACR,SAAU,UACV,aAAc,gBACd,KAAM,SACN,aAAc,wBACd,cAAe,0BACf,aAAc,+BACd,YAAa,+BACb,QAAS,iCACX,EAEA,OAAQ,CACN,OAAQ,QACR,YAAa,KACb,OAAQ,KACR,UAAW,MACX,aAAc,SACd,OAAQ,KACR,SAAU,OACV,aAAc,YACd,KAAM,MACN,aAAc,OACd,cAAe,OACf,aAAc,WACd,YAAa,aACb,QAAS,sBACX,EAEA,OAAQ,CACN,OAAQ,QACR,YAAa,MACb,OAAQ,MACR,UAAW,WACX,aAAc,gBACd,OAAQ,MACR,SAAU,MACV,aAAc,qBACd,KAAM,QACN,aAAc,gBACd,cAAe,gBACf,aAAc,0BACd,YAAa,mBACb,QAAS,+BACX,EAEA,OAAQ,CACN,OAAQ,KACR,YAAa,KACb,OAAQ,KACR,UAAW,OACX,aAAc,KACd,OAAQ,KACR,SAAU,KACV,aAAc,QACd,KAAM,KACN,aAAc,QACd,cAAe,QACf,aAAc,YACd,YAAa,gBACb,QAAS,mBACX,EAEA,OAAQ,CACN,OAAQ,UACR,YAAa,OACb,OAAQ,OACR,UAAW,WACX,aAAc,gBACd,OAAQ,cACR,SAAU,iBACV,aAAc,0BACd,KAAM,eACN,aAAc,eACd,cAAe,gBACf,aAAc,wBACd,YAAa,uBACb,QAAS,0BACX,EAEA,OAAQ,CACN,OAAQ,QACR,YAAa,UACb,OAAQ,UACR,UAAW,UACX,aAAc,eACd,OAAQ,iBACR,SAAU,eACV,aAAc,0BACd,KAAM,aACN,aAAc,sBACd,cAAe,wBACf,aAAc,2BACd,YAAa,gBACb,QAAS,iCACX,EAEA,OAAQ,CACN,OAAQ,QACR,YAAa,kBACb,OAAQ,OACR,UAAW,iBACX,aAAc,cACd,OAAQ,QACR,SAAU,WACV,aAAc,cACd,KAAM,SACN,aAAc,sBACd,cAAe,gBACf,aAAc,gCACd,YAAa,mCACb,QAAS,8BACX,EAEA,OAAQ,CACN,OAAQ,YACR,YAAa,SACb,OAAQ,SACR,UAAW,SACX,aAAc,eACd,OAAQ,aACR,SAAU,cACV,aAAc,iBACd,KAAM,UACN,aAAc,mBACd,cAAe,wBACf,aAAc,6BACd,YAAa,2BACb,QAAS,0BACX,CACF,EC7UaC,GAAqB,MAChC3E,EACA4E,IACkB,CAClB,MAAM,QAAQ,IACZlC,EAAQkC,CAAgB,EAAE,IAAI,CAAC,CAACX,EAAQY,CAAS,IAC/C7E,EAAI,UACF,cAAcgE,EAAmBC,CAAM,CAAC,MACxC,kBAAkB,KAAK,UAAU,KAAK,UAAUY,CAAS,CAAC,CAAC,GAC7D,CACF,CACF,EAEA,MAAM7E,EAAI,UACR,sBACA,mBAAmByC,EAAKmC,CAAgB,EACrC,IACEX,GACC,GAAG,KAAK,UAAUA,CAAM,CAAC,qBAAqBD,EAC5CC,CACF,CAAC,OACL,EACC,KAAK,GAAG,CAAC,GACd,CACF,EAEaa,EAAoB,MAC/B9E,EACAJ,EACAgF,EACA7D,EACA4C,IACkB,CAClB,MAAMoB,EAAapB,EAChB,QAAQ,WAAY,EAAE,EACtB,QAAQ,qBAAsB,YAAY,EAC1C,QAAQ,cAAe,KAAK,EAEzBvD,EAAOJ,EAAI,MAAM,KACrB,CAAC,CAAE,iBAAAgF,CAAiB,IAClBA,GAAkB,YAAY,IAAMD,EAAW,YACnD,CAAA,EAEA,GAAI3E,EAAM,CACR,MAAM6E,EAAcnE,EAClBV,EACAW,EACAnB,EAAQ,aACRA,EAAQ,YACV,EACM,CAAE,WAAAsF,CAAW,EAAI9E,EACjBiB,EAAsBN,EAAM,QAAQX,EAAK,IAAI,EAAE,SAAS,EACxD+E,EAAoBP,EAAiBM,CAAU,EAGrD,GAAID,EAAa,CAEf,MAAM,KAAKE,EAAkB,aAAa,OAAQ,CAAA,EAC/C,OAAQpD,GAAOA,EAAG,WAAWV,CAAM,CAAC,EACpC,QAASU,GAAOqD,EAAQD,EAAmBpD,CAAE,CAAC,EAEjDsD,EAAOF,EAAmBF,CAAW,EAErC,MAAMK,EAAOH,CAAiB,EAG9B,MAAMI,EAAU,kBACL,KAAK,UAAU,KAAK,UAAUJ,CAAiB,CAAC,CAAC;AAAA,EAG5D,MAAMnF,EAAI,UACR,cAAcgE,EAAmBkB,CAAU,CAAC,MAC5CK,CACF,EAEA,MACF,CACF,CACF,EAEaC,GAAoB,MAC/BxF,EACA4E,EACA7D,EACA4C,IACkB,CAClB,MAAMoB,EAAapB,EAChB,QAAQ,WAAY,EAAE,EACtB,QAAQ,qBAAsB,YAAY,EAC1C,QAAQ,cAAe,KAAK,EAEzB,CAAE,MAAA1D,EAAO,UAAAwF,CAAU,EAAIzF,EAEvBI,EAAOH,EAAM,KACjB,CAAC,CAAE,iBAAA+E,CAAiB,IAClBA,GAAkB,YAAY,IAAMD,EAAW,aACnD,EAEA,GAAI3E,EAAM,CACR,KAAM,CAAE,WAAA8E,CAAW,EAAI9E,EACjBiB,EAAsBN,EAAM,QAAQX,EAAK,IAAI,EAAE,SAAS,EACxD+E,EAAoBP,EAAiBM,CAAU,EAGrD,MAAM,KAAKC,EAAkB,aAAa,OAAO,CAAC,EAC/C,OAAQpD,GAAOA,EAAG,WAAWV,CAAM,CAAC,EACpC,QAASU,GAAOqD,EAAQD,EAAmBpD,CAAE,CAAC,EAEjD,MAAMuD,EAAOH,CAAiB,EAG9B,MAAMI,EAAU,kBACH,KAAK,UAAU,KAAK,UAAUJ,CAAiB,CAAC,CAAC;AAAA,EAG9D,MAAMM,EAAU,cAAczB,EAAmBkB,CAAU,CAAC,MAAOK,CAAO,EAE1E,MACF,CACF,EC7HaG,GAAe,MAAO1F,EAAUe,IAAgC,CAC3E,MAAMf,EAAI,UACR,sBACA,wBACmBe,EAAM,OAAA,CAAQ;AAAA,CAEnC,CACF,ECca4E,GACX,CAAC/F,EAA2BgG,EAAS,KACpC5F,GAAQ,CAEH4F,GACFjG,EAAeC,CAAqD,EAElEI,EAAI,IAAI,SAAS8D,GAAO,KAAK,WAAYlE,CAAO,EAEpDiG,EAAqB7F,EAAK,CAAE,GAAI,MAAO,CAAC,EAExC,MAAMe,EAAQ,IAAImD,GAClB,IAAIU,EAA4C,KAEhD,MAAO,CACL,KAAMf,EAEN,MAAO,CACL,CAAC,GAAGA,CAAW,SAAS,EAAG,GAAGJ,CAAa,4BAC7C,EAEA,OAAQ,CACN,mCAAoC7D,EAAQ,kBAAoB,GAChE,yBAA0BwC,GACvBxC,EAAQ,cAAgB,CAAC,GACvB,IAAI,CAAC,CAAE,UAAAkG,CAAU,EAAGxD,IACnBwD,EAAY,CAACxD,EAAM,WAAYwD,CAAS,EAAI,IAC9C,EACC,OAAQ7D,GAAmCA,IAAS,IAAI,CAC7D,EACA,mBAAoB8D,EAAgB,CAClC,IAAA/F,EACA,KAAM6D,EACN,OAAQjE,EAAQ,QAChB,QAAS8E,EACX,CAAC,EACD,mBAAoB,CAClB,YAAa9E,EAAQ,aAAe,IACpC,aAAcA,EAAQ,cAAgB,EACtC,kBAAmBA,EAAQ,mBAAqB,EAChD,mBAAoBA,EAAQ,oBAAsB,EAClD,QAASA,EAAQ,SAAW,CAC1B,CAAE,IAAK,IAAK,KAAM,EAAK,EACvB,CAAE,IAAK,IAAK,KAAM,EAAK,CACzB,EACA,OAAQA,EAAQ,QAAU,sBAC5B,EACA,yBAA0B,KAAK,UAAUA,EAAQ,cAAgB,KAAK,CACxE,EAEA,iBAAkB,GAAG6D,CAAa,YAElC,sBAAuB,CAACuC,EAAyBhG,IAAc,CAC7DiG,EAA2BD,EAAgBhG,EAAK,aAAc,EAAI,EAClEkG,EAAqBF,EAAgBhG,EAAK,CACxC,mBACA,SACA,iBACF,CAAC,CACH,EAEA,cAAe,MAAOA,GAAuB,CAC3CD,EAAeC,CAAG,EAClB4E,EAAmB,MAAM/B,GAAoB7C,EAAKJ,EAASmB,CAAK,CAClE,EAEA,WAAY,MAAOf,GAAuB,CACpCA,EAAI,IAAI,OAAO,MAAM2E,GAAmB3E,EAAK4E,CAAiB,EAClE,MAAMc,GAAa1F,EAAKe,CAAK,CAC/B,EAEA,UAAW,CAACf,EAAKmG,IAAmB,CAIlC,GAFE,cAAevG,EAAUA,EAAQ,UAAYI,EAAI,IAAI,QAExC,CAEb,MAAMoG,EAAqBC,EAAM,iBAAkB,CACjD,IAAKrG,EAAI,IAAI,KAAA,EACb,cAAe,EACjB,CAAC,EAEDoG,EAAmB,GAAG,MAAQzC,GAAS,CAChCmB,EACH9E,EACAJ,EACAgF,EACA7D,EACA4C,CACF,CACF,CAAC,EACDyC,EAAmB,GAAG,SAAWzC,GAAS,CACnCmB,EACH9E,EACAJ,EACAgF,EACA7D,EACA4C,CACF,CACF,CAAC,EACDyC,EAAmB,GAAG,SAAWzC,GAAS,CACnC6B,GAAkBxF,EAAK4E,EAAmB7D,EAAO4C,CAAI,CAC5D,CAAC,EAEDwC,EAAS,KAAKC,CAAkB,CAClC,CACF,EAEA,YAAcpG,GAAQoE,GAAepE,EAAKJ,EAASgF,CAAiB,CACtE,CACF,ECrIK,IAAW0B,GAAAA,IAChBA,EAAA,QAAU,IACVA,EAAA,OAAS,IACTA,EAAA,KAAO,IACPA,EAAA,aAAe,IAJCA,IAAAA,GAAA,CAAA,CAAA"}