import{decodeData as v}from"@vuepress/helper/client";import{useMutationObserver as y}from"@vueuse/core";import{defineComponent as j,shallowRef as d,ref as u,computed as S,onMounted as w,watch as C,h as a}from"vue";import{LoadingIcon as b}from"vuepress-shared/client";import"../styles/chart.scss";import{g as m}from"../darkmode-DQ0CDr6h.js";const A=(e,r)=>r==="json"?JSON.parse(e):new Function(`let config,__chart_js_config__;
{
${e}
__chart_js_config__=config;
}
return __chart_js_config__;`)();var E=j({name:"ChartJS",props:{config:{type:String,required:!0},id:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"json"}},setup(e){const r=d(),s=d(),i=u(!1),n=u(!0),f=S(()=>v(e.config));let l=!1,c;const p=async t=>{const[{default:o}]=await Promise.all([import("chart.js/auto"),l?Promise.resolve():(l=!0,new Promise(h=>setTimeout(h,MARKDOWN_ENHANCE_DELAY)))]);o.defaults.borderColor=t?"#ccc":"#36A2EB",o.defaults.color=t?"#fff":"#000",o.defaults.maintainAspectRatio=!1;const _=A(f.value,e.type),g=s.value.getContext("2d");c?.destroy(),c=new o(g,_),n.value=!1};return w(()=>{i.value=m(),y(document.documentElement,()=>{i.value=m()},{attributeFilter:["class","data-theme"],attributes:!0}),C(i,t=>p(t),{immediate:!0})}),()=>[e.title?a("div",{class:"chartjs-title"},decodeURIComponent(e.title)):null,n.value?a(b,{class:"chartjs-loading",height:192}):null,a("div",{ref:r,class:"chartjs-wrapper",id:e.id,style:{display:n.value?"none":"block"}},a("canvas",{ref:s,height:400}))]}});export{E as default};
//# sourceMappingURL=ChartJS.js.map
